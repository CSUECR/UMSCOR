@model MorSun.Model.ForgetModel
@{
    ViewBag.Title = "找回密码";
    int yzmR = new Random().Next(100000);
}

<div class="content-wrapper clear-fix">
    
        <h2>@ViewBag.Title</h2>
        @using (Html.BeginForm("Register", "Account", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { id = "forgetPassForm" }))
        {
            @Html.AntiForgeryToken()
            <fieldset>
                <legend>找回密码</legend>
                <ol>
                    <li>
                        @Html.LabelFor(m => m.UserName)
                        @Html.TextBoxFor(m => m.UserName)
                    </li>                    
                    <li>
                        @Html.LabelFor(m => m.Password)
                        @Html.PasswordFor(m => m.Password)
                    </li>
                    <li>
                        @Html.LabelFor(m => m.ConfirmPassword)
                        @Html.PasswordFor(m => m.ConfirmPassword)
                    </li>
                    <li>
                        @Html.LabelFor(m => m.NickName)
                        @Html.TextBoxFor(m => m.NickName)
                    </li>
                    @if ("RegVerificationCode".GetXmlConfig().ToAs<bool>())
                    {
                        <li>
                            @Html.LabelFor(m => m.Verifycode)
                            @Html.TextBoxFor(m => m.Verifycode, new { @class = "loginYZMText", onfocus = "getVerifyCode('#Verifycode', '#VerifyCodeImg')" })
                            <img id="VerifyCodeImg" height="35px" src="/images/VerifyCode.aspx?type=@yzmR"
                                 title="看不清?点击换张图片!" style="vertical-align: middle; cursor: pointer; " onclick="this.src=this.src+'&';" />
                        </li>
                    }
                </ol>
                <input type="button" id="forgetPassBtn" value="下一步" />
                <input name="VerifycodeRandom" type="hidden" value="@yzmR" />
                <input name="BeInviteCode" type="hidden" value="@Model.BeInviteCode"/>
            </fieldset>
        }
    
    </div>
    @section Scripts {
        @Scripts.Render("~/bundles/jquery")
        @Scripts.Render("~/bundles/jqueryval")
        @Scripts.Render("~/Scripts/jquery.validator")
       
        @Styles.Render("~/Content/JQueryQtipCustom/css")
        @Scripts.Render("~/Content/JQueryQtipCustom/js")
        @Scripts.Render("~/Scripts/Common/MorSun.Common")

        <script type="text/javascript">
            $(ajaxSubmitFormHandle('#forgetPassBtn', '#forgetPassForm', '注册失败，请联系管理员', '#divInfo'));
        </script>
    }
